/**********************************************************************************************************************************
 *
 * @file		funciones.c
 * @brief		Descripcion del modulo
 * @date		02-05-2020
 * @author		Luis Mora
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include "funciones.h"

/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** PROTOTIPO DE FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

 /***********************************************************************************************************************************
 *** FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/**
    \fn     imprimefifo
    \brief  Muestra los valores leidos del fifo
    \author Luis Mora
    \date 02-05-2020
    \param [in] int fd file descriptor del fifo
    \return void;
*/
void imprimefifo( int fd ){
    int bf,ctr=0;
    srand( time(NULL) );
    while( leefd( fd,&bf,sizeof( int ) ) > 0 )
        printf("fifo[%d]:%d\n",++ctr,(int)bf);
}


/***********************************************************************************************************************************
 *** FUNCIONES GLOBALES AL MODULO
 **********************************************************************************************************************************/
/**
    \fn     recibir
    \brief  Abre el FIFO y lee los numeros aleatorios escritos
    \author Luis Mora
    \date 02-05-2020
    \return 0 si hay exito, 1 si hay error;
*/
int recibir( ){
    int fifofd = abrefifo( FIFOPATH,O_RDONLY );
    imprimefifo( fifofd );
    cierrafifo( FIFOPATH,fifofd );
    exit(0);
}
